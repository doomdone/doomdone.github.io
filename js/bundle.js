!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){i(1)},function(e,t,i){let n=i(2),r=i(3),o=new createjs.Stage("havoqCanvas"),s=function(e){return new Promise((t,i)=>{$.get(e,function(e){t(e)}).fail(function(){i("failed to load hail data")})}).then(function(e){return $.parseJSON(e)},function(t){console.log("failed to load data from '"+e+"': "+t)})};!async function(){o.canvas.width=window.innerWidth,o.canvas.height=window.innerHeight;let e=s("https://havoq.herokuapp.com/haze"),t=s("https://havoq.herokuapp.com/hail"),a=await e,c=window.haze=new n.Haze(a);c.draw();let h=await t,d=c.hail=new r.Hail(h);d.draw(),c.container.addChild(d.container),d.drawText(function(){o.addEventListener("stagemousemove",function(e){d.changeSpeed(e)}),c.start(),d.start()}),o.addChild(c.container),createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.addEventListener("tick",function(e){i(6).tick(e),o.update(e)}),o.x=window.innerWidth/2-d.x,o.y=window.innerHeight/2-d.y}(),e.exports=o},function(e,t,i){"use strict";i.r(t),i.d(t,"Haze",function(){return s});const n="black",r=5e3;function o(e,t){console.log("set default params for haze"),this.x=e,this.y=e,this.size=e,this.color=t}class s{constructor(e){void 0===e&&(e=new o(r,n)),this.x=e.x,this.y=e.y,this.size=e.size,void 0===e.color?this.color=n:this.color=e.color}draw(){this.container=new createjs.Container;let e=new createjs.Shape;e.graphics.beginFill(this.color).drawCircle(this.x,this.y,this.size),e.name="haze",this.container.addChild(e)}start(){this.play()}limit(e){return this.size-e.size-e.width/2}play(){console.log("haze started")}}},function(e,t,i){"use strict";i.r(t),i.d(t,"Hail",function(){return o});const n=200;let r=i(4);class o{constructor(e){void 0===e&&(e=new r.getDefault),this.x=e.x,this.y=e.y,(void 0===e.size||e.size<r.minSize)&&(e.size=r.minSize),this.size=e.size,this.color=e.color,this.width=r.width(this.size),this.speed=new r.speed(0,0),this.reverseSpeed=!1}draw(){this.container=new createjs.Container;let e=new createjs.Shape;e.graphics.setStrokeStyle(r.width(n)).beginStroke(this.color).drawCircle(this.x,this.y,n),e.shadow=new createjs.Shadow(this.color,0,0,30),e.name="hail",this.container.addChild(e)}drawText(e){let t=i(5),r={x:this.x,y:this.y,size:n,color:this.color,background:haze.color};t.draw(r,e,haze.container)}start(){let e=new createjs.Timeline,t=this.container.getChildByName("hail").graphics;e.addTween(createjs.Tween.get(t.command,{loop:!1}).to({radius:this.size},1e3).call(this.grow),createjs.Tween.get(t._strokeStyle,{loop:!1}).to({width:this.width},1e3).call(this.go)),e.gotoAndPlay(0)}grow(){console.log("hail started to grow")}go(){console.log("hail can be moved now")}move(){}position(e,t){let i=this.x+this.container.x,n=this.y+this.container.y;return s(i-haze.x+e,n-haze.y+t)}isInside(e,t){return s(e,t)<this.size+this.width/2}changeSpeed(e){let t=Math.floor(e.stageX-window.innerWidth/2),i=Math.floor(e.stageY-window.innerHeight/2);this.position(t,i)<haze.limit(this)&&(this.reverseSpeed=!1),this.isInside(t,i)?this.speed=new r.speed(0,0):this.speed=new r.speed(t,i)}}function s(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}},function(e,t,i){"use strict";i.r(t),i.d(t,"minSize",function(){return n}),i.d(t,"speed",function(){return r}),i.d(t,"width",function(){return o}),i.d(t,"getDefault",function(){return s});const n=30;function r(e,t){this.x=e,this.y=t}function o(e){return 2*n**2/e}function s(){console.log("set default params for hail"),this.x=5e3,this.y=5e3,this.size=30,this.color="#00FF40"}},function(e,t,i){"use strict";function n(e,t,i){let n=new createjs.Container,r=new createjs.Shape;r.graphics.beginFill(e.background).drawCircle(e.x,e.y,e.size);r.addEventListener("click",function(){i.removeChild(n),t()}),n.addChild(r);let o=new createjs.Text("start","bold 60px Courier New",e.color),s=o.getBounds();o.x=e.x-s.width/2,o.y=e.y+s.height/2,o.textBaseline="alphabetic",n.addChild(o),i.addChild(n)}i.r(t),i.d(t,"draw",function(){return n})},function(e,t,i){"use strict";i.r(t),i.d(t,"tick",function(){return o});const n=1e3;let r=i(7);function o(e){let t=haze.hail,i=t.container;if(0!=t.speed.x&&0!=t.speed.y){let o=t.reverseSpeed?-t.speed.x:t.speed.x,s=t.reverseSpeed?-t.speed.y:t.speed.y,a=Math.sqrt(o*o+s*s);if(a>1&&(o/=a,s/=a),0!=o||0!=s){let a=o*n*(e.delta/1e3),c=s*n*(e.delta/1e3),h=r.position(t.x+i.x+a,t.y+i.y+c);if(h>r.limit()){let e=r.coef(a,c,r.limit()-h);a*=e,c*=e,t.reverseSpeed=!t.reverseSpeed}i.x+=a,i.y+=c}}let o=haze.container;o.regX=i.x,o.regY=i.y}},function(e,t,i){"use strict";function n(e,t){return s(e-haze.x,t-haze.y)}function r(){let e=haze.hail;return haze.size-e.size-e.width/2}function o(e,t,i){return Math.sqrt(Math.pow(i,2)/(Math.pow(e,2)+Math.pow(t,2)))}function s(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}i.r(t),i.d(t,"position",function(){return n}),i.d(t,"limit",function(){return r}),i.d(t,"coef",function(){return o}),i.d(t,"mean",function(){return s})}]);