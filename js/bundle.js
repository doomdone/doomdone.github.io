!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){i(1)},function(e,t,i){let n=i(2),r=i(3),o=new createjs.Stage("havoqCanvas"),s=function(e){return new Promise((t,i)=>{$.get(e,function(e){t(e)}).fail(function(){i("failed to load hail data")})}).then(function(e){return $.parseJSON(e)},function(t){console.log("failed to load data from '"+e+"': "+t)})};!async function(){o.canvas.width=window.innerWidth,o.canvas.height=window.innerHeight;let e=s("https://havoq.herokuapp.com/haze"),t=s("https://havoq.herokuapp.com/hail"),a=await e,h=window.haze=new n.Haze(a);h.draw();let c=await t,d=h.hail=new r.Hail(c);d.draw(),h.container.addChild(d.container),d.drawText(function(){o.addEventListener("stagemousemove",function(e){d.changeSpeed(e)}),h.start(),d.start()}),o.addChild(h.container),createjs.Ticker.timingMode=createjs.Ticker.RAF,createjs.Ticker.addEventListener("tick",function(e){i(7).tick(e),o.update(e)}),o.x=window.innerWidth/2-d.x,o.y=window.innerHeight/2-d.y}(),e.exports=o},function(e,t,i){"use strict";i.r(t),i.d(t,"Haze",function(){return s});const n="black",r=5e3;function o(e,t){console.log("set default params for haze"),this.x=e,this.y=e,this.size=e,this.color=t}class s{constructor(e){void 0===e&&(e=new o(r,n)),this.x=e.x,this.y=e.y,this.size=e.size,void 0===e.color?this.color=n:this.color=e.color}draw(){this.container=new createjs.Container;let e=new createjs.Shape;e.graphics.beginFill(this.color).drawCircle(this.x,this.y,this.size),e.name="haze",this.container.addChild(e)}start(){this.play()}limit(e){return this.size-e.size-e.width/2}play(){console.log("haze started")}}},function(e,t,i){"use strict";i.r(t),i.d(t,"Hail",function(){return s});const n=200;let r=i(4),o=i(5);class s{constructor(e){void 0===e&&(e=new r.getDefault),this.x=e.x,this.y=e.y,(void 0===e.size||e.size<r.minSize)&&(e.size=r.minSize),(void 0===e.speed||e.speed<=0)&&(e.speed=r.defaultSpeed),this.size=e.size,this.color=e.color,this.width=r.width(this.size),this.speed=new r.speed(0,0),this.maxSpeed=e.speed,this.reverseSpeed=!1}draw(){this.container=new createjs.Container;let e=new createjs.Shape;e.graphics.setStrokeStyle(r.width(n)).beginStroke(this.color).drawCircle(this.x,this.y,n),e.shadow=new createjs.Shadow(this.color,0,0,30),e.name="hail",this.container.addChild(e)}drawText(e){let t=i(6),r={x:this.x,y:this.y,size:n,color:this.color,background:haze.color};t.draw(r,e,haze.container)}start(){let e=new createjs.Timeline,t=this.container.getChildByName("hail").graphics;e.addTween(createjs.Tween.get(t.command,{loop:!1}).to({radius:this.size},1e3).call(this.grow),createjs.Tween.get(t._strokeStyle,{loop:!1}).to({width:this.width},1e3).call(this.go)),e.gotoAndPlay(0)}grow(){console.log("hail started to grow")}go(){console.log("hail can be moved now")}move(e){let t=this.container;if(0==this.speed.x&&0==this.speed.y)return;let i=(this.reverseSpeed?-this.speed.x:this.speed.x)*e,n=(this.reverseSpeed?-this.speed.y:this.speed.y)*e,r=o.position(this.x+t.x+i,this.y+t.y+n);if(r>o.limit()){let e=o.coef(i,n,o.limit()-r);i*=e,n*=e,this.reverseSpeed=!this.reverseSpeed}t.x+=i,t.y+=n}position(e,t){let i=this.x+this.container.x,n=this.y+this.container.y;return a(i-haze.x+e,n-haze.y+t)}isInside(e,t){return a(e,t)<this.size+this.width/2}changeSpeed(e){let t=Math.floor(e.stageX-window.innerWidth/2),i=Math.floor(e.stageY-window.innerHeight/2);if(this.position(t,i)<haze.limit(this)&&(this.reverseSpeed=!1),this.isInside(t,i))this.speed=new r.speed(0,0);else{let e=o.mean(t,i);e>1&&(t/=e,i/=e),this.speed=new r.speed(t*this.maxSpeed,i*this.maxSpeed)}}}function a(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}},function(e,t,i){"use strict";i.r(t),i.d(t,"minSize",function(){return n}),i.d(t,"defaultSpeed",function(){return r}),i.d(t,"speed",function(){return o}),i.d(t,"width",function(){return s}),i.d(t,"getDefault",function(){return a});const n=30,r=1e3;function o(e,t){this.x=e,this.y=t}function s(e){return 2*n**2/e}function a(){console.log("set default params for hail"),this.x=5e3,this.y=5e3,this.size=30,this.color="#00FF40",this.speed=r}},function(e,t,i){"use strict";function n(e,t){return s(e-haze.x,t-haze.y)}function r(){let e=haze.hail;return haze.size-e.size-e.width/2}function o(e,t,i){return Math.sqrt(Math.pow(i,2)/(Math.pow(e,2)+Math.pow(t,2)))}function s(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}i.r(t),i.d(t,"position",function(){return n}),i.d(t,"limit",function(){return r}),i.d(t,"coef",function(){return o}),i.d(t,"mean",function(){return s})},function(e,t,i){"use strict";function n(e,t,i){let n=new createjs.Container,r=new createjs.Shape;r.graphics.beginFill(e.background).drawCircle(e.x,e.y,e.size);r.addEventListener("click",function(){i.removeChild(n),t()}),n.addChild(r);let o=new createjs.Text("start","bold 60px Courier New",e.color),s=o.getBounds();o.x=e.x-s.width/2,o.y=e.y+s.height/2,o.textBaseline="alphabetic",n.addChild(o),i.addChild(n)}i.r(t),i.d(t,"draw",function(){return n})},function(e,t,i){"use strict";function n(e){if(!e.paused){let t=haze.hail;t.move(e.delta/1e3),haze.container.regX=t.container.x,haze.container.regY=t.container.y}}i.r(t),i.d(t,"tick",function(){return n})}]);